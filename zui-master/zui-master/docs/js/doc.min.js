/*!
 * ZUI - v1.4.0 - 2016-01-26
 * http://zui.sexy
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2016 cnezsoft.com; Licensed MIT
 */

+function(e,t){"use strict";String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var a=this.toString();(void 0===t||t>a.length)&&(t=a.length),t-=e.length;var s=a.indexOf(e,t);return-1!==s&&s===t}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.lastIndexOf(e,t)===t}),String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)});var a=function(t,a){var s=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=e.location.search.substr(1).match(s);return null!==i?unescape(i[2]):a},s=a("debug",0);s&&console.warn("DEBUG ENABLED.");var i,r,o,n,c,l,d,u,h,p,f,g,v,m,b,C,y,w,x,k,T,W,z,L,j,E,S,q={basic:{col:1},control:{col:2},component:{col:2},javascript:{col:3},view:{col:3},learn:{col:1},promotion:{col:1,row:2},resource:{col:1,row:2},contribution:{col:1,row:2}},A="lastReloadAnimate",D="LAST_QUERY_ID",P="docs/index.json",O="docs/icons.json",_="package.json",H="zui.json",I=void 0,B={standard:null,lite:null,separate:null},F={"default":{variables:{"color-primary":"#3280fc","color-secondary":"#145ccd","color-pale":"#ebf2f9","border-radius-base":"4px","border-radius-large":"6px","border-radius-small":"3px"}},blue:{variables:{"color-primary":"#039BE5","color-secondary":"#0288d1","color-pale":"#e1f5fe","border-radius-base":"4px","border-radius-large":"6px","border-radius-small":"2px"}},red:{variables:{"color-primary":"#d9534f","color-secondary":"#c74743","color-pale":"#ffebee","border-radius-base":"4px","border-radius-large":"6px","border-radius-small":"2px"}},green:{variables:{"color-primary":"#4caf50","color-secondary":"#43a047","color-pale":"#e8f5e9","border-radius-base":0,"border-radius-large":0,"border-radius-small":0}},purple:{variables:{"color-primary":"#8666b8","color-secondary":"#673AB7","color-pale":"#f5eeff","border-radius-base":0,"border-radius-large":0,"border-radius-small":0}},brown:{variables:{"color-primary":"#8D6E63","color-secondary":"#795548","color-pale":"#f7ebe1","border-radius-base":"15px","border-radius-large":"15px","border-radius-small":"15px"}},yellow:{variables:{"color-primary":"#d0884d","color-secondary":"#bd7b46","color-pale":"#fff0d5","border-radius-base":"4px","border-radius-large":"6px","border-radius-small":"2px"}},indigo:{variables:{"color-primary":"#3F51B5","color-secondary":"#3949AB","color-pale":"#ECEFF1","border-radius-base":0,"border-radius-large":"1px","border-radius-small":0}},bluegrey:{variables:{"color-primary":"#607D8B","color-secondary":"#546E7A","color-pale":"#ECEFF1","border-radius-base":0,"border-radius-large":0,"border-radius-small":0}},black:{variables:{"color-primary":"#333","color-secondary":"#222","color-pale":"#f5f5f5","border-radius-base":0,"border-radius-large":0,"border-radius-small":0}}},N="ZUI",$=-1,R=1120,U=!0,M=function(e){return"string"==typeof e?(e=e.toLowerCase(),e.startsWith("http://")||e.startsWith("https://")):!1},Q=function(){if(!(document.body.clientWidth>=e.innerWidth)){if(0>$){var t=document.createElement("div");t.className="modal-scrollbar-measure",u.append(t),$=t.offsetWidth-t.clientWidth,u[0].removeChild(t)}if($){var a=parseInt(u.css("padding-right")||0,10);u.css("padding-right",a+$),T.css("padding-right",$)}}},V=function(){u.css("padding-right",""),T.css("padding-right","")},Y=function(e,a,c,l){var d=null,h=e===P,p=e===O,f=!1;if(h&&o)d={data:o,version:o.version},f=!0;else if(p&&n)d=n,f=!0;else if(r){var g=t.zui.store.get("//"+e,null);if(null!==g){var v=t.zui.store.get("//"+e+"::V");v&&(d={data:g,version:v},f=!0,!o&&h&&(o=g),s&&console.log("Ready storage data ",e,":",d))}}if(!f||!h&&d.version!==i||(s&&console.log("Load",e,"from cache:",d),l||(a(d.data,"cache"),h||s))){var m=e.endsWith(".json")?"json":"html",b=function(){t.get(e,function(r){null!==r?(h?(i=r.version,o=r):p&&(n={data:r,version:i}),d={data:r,version:i},t.zui.store.set("//"+e,r),t.zui.store.set("//"+e+"::V",i),s&&console.log("Load",e,"from remote:",d),a(r,"remote")):f&&!h&&(s&&console.log("Failed load",e,"from remote, instead load cache:",d),a(d.data,"cache"))},m).error(function(){s&&console.warn("Ajax error:",e),f&&!h?(s&&console.log("Failed load",e,"from remote with error, instead load cache:",d),a(d.data,"cache")):a(null,"error"),u.hasClass("page-open")&&k.children(".loader").addClass("with-error")})};c!==!1&&(c?setTimeout(b,c):b())}},G=function(e,a){return o?(t.each(q,function(s,i){if(o.chapters[s]){t.extend(i,o.chapters[s]);var r=i.sections,n=null;return a&&(n=a(i,r),n===!1)?!1:void t.each(r,function(t,a){return e(i,a,n)===!1?!1:void 0})}}),!0):(console.error("Document index is empty."),!1)},J=function(e,t){var a=t.icon;e.attr("class","icon").text("").css("background-image",""),(void 0===a||null===a||""===a)&&(a=t.name.substr(0,1).toUpperCase()),a.startsWith("icon-")?e.addClass(a):a.endsWith(".png")?e.css("background-image","url("+a+")").addClass("with-img"):e.addClass("text-icon").text(a)},Z=function(){var e=0;G(function(a,s,i){var r=a.id;s.chapter=r,s.chapterName=a.name;var o=s.url;"undefined"==typeof o?(s.url="docs/part/"+s.chapter+"-"+s.id+".html",s.target="page"):M(o)?s.target="external":o&&o.endsWith(".md")?(s.target="page",s.targetType="markdown",".md"===o&&(s.url="docs/part/"+s.chapter+"-"+s.id+".md")):s.target="";var n=r+"-"+s.id,c=f.clone().data("section",s);c.attr({id:"section-"+n,"data-id":s.id,"data-chapter":r,"data-order":e++,"data-accent":a.accent,"data-target":s.target});var d=c.children(".card-heading"),u="#"+r+"/"+s.id;d.find(".name").text(s.name).attr("href",u),J(d.children(".icon"),s);var h=c.find(".topics");if(s.topics&&s.topics.length){var p=0;t.each(s.topics,function(e,t){"undefined"==typeof t.id&&(t.id=e);var a="undefined"==typeof t.url?u+"/"+p++:t.url;h.append('<li data-id="'+e+'"><a href="'+a+'"'+(M(a)?' target="_blank"':"")+">"+t.name+"</a></li>")})}else h.remove(".card-content"),c.addClass("without-topics");i.append(c.addClass("show"+(l?" in":"")))},function(e,t){e.$.attr("data-accent",e.accent);var a=e.$sections;return a.children().remove(),a})?(u.children(".loader").removeClass("loading"),j=p.find(".section"),l||(clearTimeout(p.data(A)),p.data(A,setTimeout(function(){j.addClass("in"),E.addClass("in")},100)),l=!0)):s&&console.error("Display sections failed.")},K=function(e,t,a){e===I&&(e=u),t===I||"down"===t?t=e.scrollTop()+.8*(h.height()-e.offset().top):"up"===t&&(t=e.scrollTop()-.8*(h.height()-e.offset().top)),e.animate({scrollTop:t},200,"swing",a)},X=function(e){if(e){e.offset().top,e.outerHeight(),h.height(),u.scrollTop()}},ee=function(e){return e===I&&(e=b),e&&e.hasClass("choosed")&&e.hasClass("show")},te=function(e,t,a){if(j){if(ee(e||null)&&!a)return b=e.addClass("open"),void X(e);var s=e&&e.hasClass("open");j.removeClass(t?"choosed":"choosed open"),e&&e.hasClass("section")&&(b=e.addClass(a&&!s?"choosed":"choosed open"),X(e))}},ae=function(){var e=j.filter(".show");if(ee()){for(var t=parseInt(b.data("order")),a=b;--t>-1;){var s=e.filter('[data-order="'+t+'"]');if(s.length){a=s;break}}te(a)}else te(e.first())},se=function(){var e=j.filter(".show");if(ee()){for(var t=parseInt(b.data("order")),a=b,s=j.length;t++<s;){var i=e.filter('[data-order="'+t+'"]');if(i.length){a=i;break}}te(a)}else te(e.first())},ie=function(e,t,a,s){return Math.sqrt(Math.pow(e-a,2)+Math.pow(t-s,2),2)},re=function(){var e=j.filter(".show");if(ee()){var a=b.offset(),s=a.left-p.children(".container").offset().left-10;if(50>s)return void ae();var i=a.top;s=a.left;var r=b,o=99999;e.each(function(){var e=t(this),a=e.offset();if(a.left+50<s){var n=ie(a.left,a.top,s,i);o>n&&(r=e,o=n)}}),te(r)}else te(e.first())},oe=function(){var e=j.filter(".show");if(ee()){var a=b.offset(),s=p.children(".container"),i=a.left-s.offset().left-10;if(i+20+b.outerWidth()+50>=s.outerWidth())return void se();var r=a.top;i=a.left;var o=b,n=99999;e.each(function(){var e=t(this),a=e.offset();if(a.left>i){var s=ie(a.left,a.top,i,r);n>s&&(o=e,n=s)}}),te(o)}else te(e.first())},ne=function(){p.find(".col.hide").removeClass("hide"),v.removeClass("hide"),j.addClass("show"),E.addClass("show"),p.data(A,setTimeout(function(){j.addClass("in"),E.addClass("in")},20)),u.removeClass("query-enabled").attr("data-query","")},ce=function(e){var a=t("#section-control-icon");if(!e||!e.length)return void a.removeClass("section-preview-show").data("preview",null);a.addClass("open section-preview-show");var s=a.children(".section-preview"),i=a.data("preview");s.length||(s=t("#iconPreviewTemplate").clone().attr("id",""),a.children(".card-heading").after(s)),a.children(".section-search").find("li.active").removeClass("active"),e.addClass("active"),i&&s.find(".icon").removeClass("icon-"+i);var r=e.data("icon");a.data("preview",r.id);var o="icon-"+r.id,n=(r.id.startsWith("spin")||r.categories&&r.categories.indexOf("Spinner Icons")>-1)===!0;s.find(".icon").addClass(o).toggleClass("icon-spin",n),s.find(".name").text(n?"icon-spin "+o:o),s.find(".unicode").text(r.code),r.alias&&r.alias.length?s.find(".alias").removeClass("hide").find(".alias-values").text(r.alias.join(",")):s.find(".alias").addClass("hide")},le=function(e){t.isArray(e)||!e&&!e.length||(e=[e]);var a=t("#section-control-icon");u.attr("data-query","icons");var s=a.children(".section-search");s.length||(s=t('<div class="section-search card-content"><div class="loader loading"><i class="icon icon-spin icon-spinner"></i> 正在拼命加载中...</div></div>'),a.children(".card-heading").after(s),s=a.children(".section-search")),Y(O,function(a){var i=s.children("ul");if(i.length||(i=t('<ul data-view="icons">'),t.each(a,function(e,a){var s=t('<li id="control-icon-'+e+'" data-id="'+e+'"><a href="#control/icons/'+e+'"><i class="icon icon-'+e+'"></i> icon-'+e+"</a></li>");a.id=e,s.data("icon",a),i.append(s)}),s.children(".loader").replaceWith(i)),!e.length)return i.children(".hide").removeClass("hide"),void ce(i.children().first());e.forEach(function(t,a){e[a]=e[a].toLowerCase()});var r,o=0;t.each(a,function(a,s){var i=!1,n=0;a=a.toLowerCase(),t.each(e,function(e,r){var o=!1;if(a.includes(r))o=!0,n+=a.startsWith(r)?120:110;else if(s.name&&s.name.toLowerCase().includes(r))o=!0,n+=s.name.toLowerCase().startsWith(r)?100:95;else if(r.startsWith("\\")&&s.code&&s.code.toLowerCase().includes(r.substr(1)))o=!0,n+=120;else{var c=[];if(t.isArray(s.filter)&&s.filter.length&&(c=c.concat(s.filter)),t.isArray(s.categories)&&s.categories.length&&(c=c.concat(s.categories)),t.isArray(s.alias)&&s.alias.length&&(c=c.concat(s.alias)),!c.length)return;t.each(c,function(e,t){return t=t.toLowerCase(),t.includes(r)?(o=!0,n+=50,!1):void 0})}return o?void(i=!0):i=!1});var c=t("#control-icon-"+a).toggleClass("hide",!i);i&&n>o&&(o=n,r=c)}),ce(r)})},de=function(a){if(!j)return void(s&&console.log("Query failed, $sections is empty. key:",a));if("undefined"==typeof a&&(a=null),g.data("queryString")!==a&&(g.data("queryString",a).val(a),p.css("min-height",p.height())),null===a||!a.length)return ne(),void W.removeClass("with-query-text");W.addClass("with-query-text"),u.addClass("query-enabled").attr("data-query",""),e.ga&&t.isFunction(ga)&&(d&&clearTimeout(d),d=setTimeout(function(){ga("send","pageview",e.location.pathname+"#search/"+a)},2e3));var i=[];if(t.each(a.split(" "),function(e,a){a=t.trim(a).toLowerCase();var s={origin:a};a.startsWith("@")?(s.type="id",s.chapter=a.substr(1),s.val=s.chapter):a.startsWith("#")?(s.type="id",s.val=a.substr(2)):a.startsWith("icon-")||a.startsWith("icon:")?(s.type="icon",s.val=a.substr(5)):a.startsWith("i:")||a.startsWith("i-")?(s.type="icon",s.val=a.substr(2)):a.startsWith("ver:")?(s.type="version",s.val=a.substr(4)):a.startsWith("v:")?(s.type="version",s.val=a.substr(2)):a.startsWith("version:")?(s.type="version",s.val=a.substr(8)):a.startsWith("gulp:")||a.startsWith("build:")?(s.type="build",s.val=a.substr(6)):a.startsWith("g:")||a.startsWith("b:")?(s.type="build",s.val=a.substr(2)):(t.each(q,function(e){return a.startsWith(e+":")?(s.type="id",s.chapter=e,s.val=a.substr(e.length),!1):void 0}),s.type||(s.type="any",s.val=a)),(s.val.length||s.type&&"any"!==s.type)&&i.push(s)}),!i.length)return void ne();var r,o,n,c,l,f,v,m={},b={};if(G(function(e,a){n=!0,f=[],r=0,t.each(i,function(s,o){switch(l=o.val,v=null,c=!1,o.type){case"id":c=(o.chapter?e:a).id.includes(l),c&&(v=[o.chapter?"chapter":"section","id"]),r=100;break;case"icon":if(n="icon"===a.id){r=120,f.push({key:o,type:["section","id"]});var d=[];return(o.val||o.val.length)&&d.push(o.val),i.forEach(function(e){e.val!==o.val&&(e.val||e.val.length)&&d.push(e.val)}),le(d),!1}break;default:var u=a.name.toLowerCase();if(u.includes(l)){c=!0,v=["section","name"],r=u.startsWith(l)?85:82;break}if(a.filter&&a.filter.includes(l)){c=!0,v=["section","filter"],r=80;break}var h=e.name.toLowerCase();if(h.includes(l)){c=!0,v=["chapter","name"],r=h.startsWith(l)?75:73;break}if(e.filter&&e.filter.includes(l)){c=!0,v=["chapter","filter"],r=70;break}if(l.length>1){if(a.id.includes(l)){c=!0,v=["section","id"],r=65;break}if(e.id.includes(l)){c=!0,v=["chapter","id"],r=60;break}if(t.isArray(a.topics)){var p=!1;if(t.each(a.topics,function(e,t){return t.name&&t.name.toLowerCase().includes(l)?(c=!0,v=["section","topic",e],p=!0,r=20,!1):void 0}),p)break}if(a.desc.toLowerCase().includes(l)){c=!0,v="section.desc",r=30;break}}else{if(e.id.startsWith(l)){c=!0,v=["chapter","id"],r=60;break}if(a.id.startsWith(l)){c=!0,v=["section","id"],r=50;break}}}return c?void f.push({key:o,type:v}):(n=!1,!1)}),o=e.id+"-"+a.id,n?(b[e.id]++,m[o]={hidden:!1,matches:f,weight:r}):m[o]={hidden:!0}},function(e){b[e.id]=0})){var C,y,w=t(),x=t(),k=-1;t.each(m,function(e,a){C=t("#section-"+e),a.hidden?w=w.add(C):(x=x.add(C),k<a.weight&&(y=C,k=a.weight)),te(y)});var T,z;t.each(b,function(e,t){z=q[e],T=!t,z.$.toggleClass("hide",T)});var E=0;p.find(".row").each(function(){var e=0,a=t(this);a.children(".col").each(function(){var a=t(this),s=a.children(".chapter:not(.hide)").length;if(a.toggleClass("hide",!s),s&&(e++,!u.hasClass("compact-mode"))){var i=a.find(".section:not(.hide)").length;i>2&&h.height()<L.height()+70*i&&ue(!0)}}),E=Math.max(E,e)}),p.attr("data-show-col",E),w.length&&(w.removeClass("in"),setTimeout(function(){w.removeClass("show")},100)),x.length&&(x.addClass("show"),setTimeout(function(){x.addClass("in")},20)),h.scrollTop(1),he()}else s&&console.error("Query failed with key: ",i)},ue=function(e,t){e===I&&(e=!u.hasClass("compact-mode"));var a="isScrollAnimating";e?u.hasClass("compact-mode")?t&&t():(u.data(a,!0).addClass("compact-mode"),setTimeout(function(){u.addClass("compact-mode-in"),h.scrollTop(1),setTimeout(function(){u.data(a,!1),t&&t()},300)},10)):u.hasClass("compact-mode")?(u.data(a,!0).removeClass("compact-mode-in"),setTimeout(function(){u.removeClass("compact-mode"),u.data(a,!1),t&&t()},300)):t&&t()},he=function(){if(e.afterPageLoad=null,e.onPageLoad=null,t.isFunction(e.onPageClose)&&(e.onPageClose(),e.onPageClose=null),u.hasClass("page-open")){var a=C.data("trans-style");return a&&(a["max-height"]="",C.css(a)),u.addClass("page-show-out").removeClass("page-open page-show-in"),""!==g.val()&&g.focus(),e.document.title=N,e.location.hash="#/",setTimeout(function(){u.removeClass("page-show page-show-out"),V()},300),!0}return!1},pe=function(e){C.removeClass("page-collapsed");var t=typeof e;if("undefined"!==t){if("string"===t){var a=parseInt(e);NaN!==a&&(t="number",e=a)}var s=function(e){e&&e.length&&(be(!1),be(e.addClass("hover"),!0))};"number"===t?s(w.children("section").eq(e)):"string"===t&&t.length}},fe=function(){C.removeClass("loading"),x.removeClass("loading")},ge=function(){var a=!1;t.isFunction(e.onPageLoad)&&(a=e.onPageLoad()===!1),setTimeout(function(){t.isFunction(e.afterPageLoad)&&e.afterPageLoad(fe)===!0&&ge();var a=k.find("pre");a.length&&e.prettyPrint&&e.prettyPrint&&(a.addClass("prettyprint"),e.prettyPrint())},200),a||fe()},ve=function(a,i,r){var o=i.chapter+"-"+i.id;if(u.hasClass("page-open")&&o===u.attr("data-page"))return void(s&&console.warn("The page already showed."));te(a,!1,!0);var n="#"+i.chapter+"/"+i.id;r&&(n+="/"+r),e.document.title=i.chapterName+" > "+i.name+" - "+N,e.location.hash=n,e.ga&&t.isFunction(ga)&&ga("send","pageview",e.location.pathname+n),u.attr("data-page-accent",a.data("accent")).attr("data-page",o),J(y.find(".icon"),i),y.find(".name").text(i.name).attr("href",n),m.hide(),m.children(".badge-author").toggle(!!i.author).find(".author-name").text(i.author),m.children(".badge-source").toggle(!!i.url).attr("href","https://github.com/easysoft/zui/tree/master/"+i.url);var c=i.lib;if(c){m.children(".badge-zui").toggle(!!c.bundles.standard),m.children(".badge-lite").toggle(!!c.bundles.lite),m.children(".badge-lib").toggle(!!c.bundles.separate),m.children(".badge-custom").toggle(!!c.custom),m.children(".badge-version").toggle(!!c.ver).text(c.ver+"+"),m.children(".badge-party").toggle(!!c.thirdpart).attr("href",c.partUrl||"javascript:;").find(".product-ver").text(c.pver);var l=c.srcCount>0||c.bundlesCount>0,d=m.children(".badge-code-dropdown").toggle(l);if(l){var h=d.find(".badge-code").attr("data-type","has"+(c.srcCount?"-source":"")+(c.bundlesCount?"-bundles":""));h.children(".badge-code-source").toggle(!!c.srcCount).find(".count").text(c.srcCount),h.children(".badge-code-pkgs").toggle(!!c.bundlesCount).find(".count").text(c.bundlesCount);var p=d.find(".dropdown-menu").empty(),f={js:"Javascript",css:"CSS",less:"LESS",resource:"资源"};if(c.srcCount&&(p.append('<li class="dropdown-header primary-header" data-type="source"><i class="icon icon-file-code"></i>  源码 '+c.srcCount+"</li>"),t.each(c.src,function(e,t){p.append('<li class="dropdown-header">'+(f[e]||e)+"</li>"),t.forEach(function(e){e=e.replace(/\/\//g,"/"),p.append('<li><a target="_blank" href="https://github.com/easysoft/zui/blob/master/'+e+'">'+e+"</a></li>")})})),c.bundlesCount){if(p.append('<li class="dropdown-header primary-header" data-type="bundles"><i class="icon icon-cube"></i> 打包</li>'),c.bundles.standard){p.append('<li class="dropdown-header">标准版</li>');var g=[];c.src.js&&c.src.js.length&&g.push("dist/js/zui.js","dist/js/zui.min.js"),c.src.less&&c.src.less.length&&g.push("dist/css/zui.css","dist/css/zui.min.css"),c.src.resource&&c.src.resource.length&&c.src.resource.forEach(function(e){e=e.indexOf("//")>-1?"dist/"+e.substr(e.indexOf("//")+1):e.replace("src/","dist/").replace("assets/","dist/"),g.push(e)}),g.forEach(function(e){e=e.replace(/\/\//g,"/"),p.append('<li><a target="_blank" href="https://github.com/easysoft/zui/blob/master/'+e.replace("/**/*","")+'">'+e+"</a></li>")})}if(c.bundles.lite){p.append('<li class="dropdown-header">简洁版</li>');var g=[];c.src.js&&c.src.js.length&&g.push("dist/js/zui.lite.js","dist/js/zui.lite.min.js"),c.src.less&&c.src.less.length&&g.push("dist/css/zui.lite.css","dist/css/zui.lite.min.css"),c.src.resource&&c.src.resource.length&&c.src.resource.forEach(function(e){e=e.indexOf("//")>-1?"dist/"+e.substr(e.indexOf("//")+1):e.replace("src/","dist/").replace("assets/","dist/"),g.push(e)}),g.forEach(function(e){e=e.replace(/\/\//g,"/"),p.append('<li><a target="_blank" href="https://github.com/easysoft/zui/blob/master/'+e.replace("/**/*","")+'">'+e+"</a></li>")})}c.bundles.separate&&(p.append('<li class="dropdown-header">独立组件</li>'),p.append('<li><a target="_blank" href="https://github.com/easysoft/zui/blob/master/dist/lib/'+i.id+'">dist/lib/'+i.id+"/**/*</a></li>")),"theme"===c.code&&(p.append('<li><a target="_blank" href="https://github.com/easysoft/zui/blob/master/dist/zui-theme.css">dist/css/zui-theme.css</a></li>'),p.append('<li><a target="_blank" href="https://github.com/easysoft/zui/blob/master/dist/zui-theme.min.css">dist/css/zui-theme.min.css</a></li>'))}}}w.empty(),C.addClass("loading"),x.removeClass("with-error").addClass("loading");var v;return Y(i.url,function(e){var a=function(){if(marked&&"markdown"===i.targetType){var a,s=t(),o=t(marked(e)),n=!0,c=o.filter("h2").length>0;o.each(function(){var e=t(this),i=e.prop("tagName");return"STYLE"===i||"SCRIPT"===i?void(s=s.add(e)):n?("H1"===i&&y.find("h2 > .name").text(e.html()),void(n=!1)):void(c&&("H1"===i||"H2"===i)||!c&&"H3"===i?(a&&(s=s.add(a)),a=t("<section><header><h3>"+e.html()+"</h3></header><article></article></section>")):(c&&("H3"===i?e=t("<h4>").html(e.html()):"H4"===i?e=t("<h5>").html(e.html()):"H5"===i&&(e=t("<h6>").html(e.html()))),a||(a=t("<article></article>")),"ARTICLE"===a.prop("tagName")?a.append(e):a.children("article").append(e)))}),a&&(s=s.add(a)),w.empty().append(s)}else w.html(e);k.scrollTop(0),pe(r),ge(),m.show()};v&&clearTimeout(v),C.hasClass("openning")?v=setTimeout(a,700):a()},400),u.hasClass("page-open")?void(s&&console.log("open section in open page",i)):(u.addClass("page-open"),void ue(!0,function(){Q(),u.addClass("page-show"),setTimeout(function(){u.addClass("page-show-in"),C.hasClass("loading")&&C.addClass("openning"),k.scrollTop(0),setTimeout(function(){C.removeClass("openning"),U&&(U=t.zui.store.get("first_open_page",!0),U&&(U=!1,t.zui.store.set("first_open_page",!1),setTimeout(function(){t("#pageCloseBtn").tooltip("show").addClass("active"),setTimeout(function(){t("#pageCloseBtn").tooltip("hide").removeClass("active")},6e3)},500)))},300)},10)}))},me=function(a,i){a=a||b;var r;if(t.isArray(a)){if("undefined"!=typeof i&&(a=a.push(i)),!a[0])return void(s&&console.warn("Open section failed: can't find the section with id "+a.join("-")));if(a.length>0&&"search"===a[0])return void de(a[1]);if(!(o&&a.length>1))return void(s&&console.warn("Open section stop by null docIndex or wrong section value."));var n=a[1],c=o.chapters[a[0]].sections,l=!1;if(t.each(c,function(e,t){return t.id===n?(a.length>2&&(i=a[2]),a=t,l=!0,!1):void 0}),!l)return void(s&&console.warn("Open section failed: can't find the section with id "+a.join("-")))}if(t.isPlainObject(a))r=t("#section-"+a.chapter+"-"+a.id);else{var d=a;a=d.data("section"),r=d}if(""===a.url)return void t.zui.messager.show("该链接所指示的文档尚未完成。你可以Fork项目来完善文档。");switch(a.target){case"external":e.open(a.url,"_blank");break;case"page":ve(r,a,i);break;default:s&&console.error("Open section failed: unknown target.")}},be=function(e,t){var a=typeof e;if("object"===a){"undefined"==typeof t&&(t=e.hasClass("collapsed")),e.toggleClass("collapsed",!t);var s=w.children("section"),i=s.length,r=s.filter(".collapsed").length;0===r?C.removeClass("page-collapsed"):r===i&&C.addClass("page-collapsed")}else t="boolean"===a?e:C.hasClass("page-collapsed"),C.toggleClass("page-collapsed",!t),t?w.children("section").removeClass("collapsed"):w.children("section").addClass("collapsed")},Ce=function(t){t.startsWith("#")&&t.length>1?(t=t.substr(1),setTimeout(function(){var e=t.split("/"),a=e[0].toLowerCase();"search"===a||"query"===a?de(e[1]):me(e)},600)):M(t)?e.open(t,"_blank"):s&&console.warn("Open page url failed: unknown url",t)},ye=function(e,t,a){if(t){var s=t.length;e=e.toLowerCase();for(var i=e+"s",r=e+".",o=e+"s.",n=0;s>n;++n){var c=t[n];if(c===e||c===i||c.startsWith(r)||c.startsWith(o))return!0}}return!1},we=function(e,a,s,i){return i||(i=[]),t.isArray(i)||(i=[i]),a.bundles&&t.each(a.bundles,function(t,a){e.builds[a]?we(e,e.builds[a],s,i):i=xe(s,[a],i)}),a.basicDpds&&(i=xe(s,a.basicDpds,i)),i=xe(s,a.includes,i,a.ignoreDpds)},xe=function(e,a,s,i,r){if(s=s||[],t.isArray(a))t.each(a,function(t,a){xe(e,a,s,i)});else{var o=e[a];o&&s.indexOf(a)<0&&(!i&&o.dpds&&xe(e,o.dpds,s,i),(o.src||!r)&&s.push(a))}return s},ke=function(e){Y(_,function(a){Y(H,function(s){c=t.extend(a,{lib:t.extend({},s.lib),builds:t.extend({},s.builds)}),t.doc&&(t.doc.pkg=c),e(c)},null,!0)},null,!0)},Te=function(){ke(function(e){function a(t,s,i){t.src&&["less","js","resource"].forEach(function(e){t.src[e]&&t.src[e].forEach(function(t){t.startsWith("~/")&&(t=t.replace("~/","js"===e?"src/js/":"less"===e?"src/less/":"src/")),s[e]||(s[e]=[]),s[e].indexOf(t)<0&&s[e].push(t)})}),t.dpds&&t.dpds.forEach(function(t){t.startsWith(i)&&e.lib[t]&&!e.lib[t].thirdpart&&a(e.lib[t],s,i)})}t(".zui-version").text("v"+e.version),B.standard=we(e,e.builds.standard,e.lib),B.lite=we(e,e.builds.lite,e.lib),B.separate=we(e,e.builds.separate,e.lib),G(function(s,i,r){var o=i.dpds||i.id,n=e.lib[o];n||(o=i.id+"s",n=e.lib[o]);var c={code:o,bundles:{}};if(t.each(B,function(e,t){ye(i.id,t,n)&&(c.bundles[e]=!0)}),n){if(n.thirdpart&&(c.thirdpart=!0,c.partUrl=n.website,c.pver=n.pver),!n.src&&n.dpds&&(c.custom=!0),n.ver)c.ver=n.ver;else if(c.custom)for(var l=0;l<n.dpds.length;++l){var d=n.dpds[l],u=e.lib[d]||e.lib[d+"s"];if(u&&u.ver){c.ver=u.ver;break}}c.src={},a(n,c.src,c.code),c.srcCount=(c.src.js?c.src.js.length:0)+(c.src.less?c.src.less.length:0)+(c.src.source?c.src.source.length:0),c.bundlesCount=0,c.bundles.standard&&c.bundlesCount++,c.bundles.lite&&c.bundlesCount++,c.bundles.separate&&c.bundlesCount++,"theme"===c.code&&c.bundlesCount++}i.lib=c})})},We=function(e){e.length&&ke(function(a){var s,i,r=t("<tbody></tbody>"),o=function(e){return a.lib[e].name};t.each(a.lib,function(e,n){if(!n.custom){var c="";if(!n.src&&n.dpds){var l=xe(a.lib,n.dpds,null,!0,!0);c="合并组件包含：",c+=t.map(l,o).join("、")}s=t("<tr/>"),i=t("<td/>"),i.attr("title",n.desc),i.html("<strong>"+n.name+"</strong> ("+e+(n.pver?" v"+n.pver:"")+")"),s.append(i),t.each(B,function(a,r){i=t('<td class="text-center"/>'),r.indexOf(e)>-1?i.addClass("success").html('<i class="text-success icon-ok"></i>'):i.html('<i class="text-muted icon-remove"></i>'),s.append(i)}),i=t("<td/>"),i.html(n.ver?" v"+n.ver+"+":c),s.append(i),r.append(s)}}),e.find("tbody").remove(),e.append(r),e.datatable({rowHover:!1,fixedHeaderOffset:200})})},ze=function(){if(!t.zui.browser.isIE()||t.zui.browser.ie>8){S=t("#copyCodeBtn");var a=new e.Clipboard(S.get(0));a.on("success",function(e){t("#copyCodeTip").addClass("tooltip-success"),S.tooltip("show",'已复制 <i class="icon icon-ok"></i>'),e.clearSelection()}),a.on("error",function(e){t("#copyCodeTip").addClass("tooltip-warning"),S.tooltip("show","按 <strong>Ctrl+C</strong> 完成复制")}),S.on("hide.zui.tooltip",function(){t("#copyCodeTip").removeClass("tooltip-success tooltip-warning")}),t(document).on("mouseenter","pre.prettyprint, .copyable",function(){var e=t(this),a=e.children("code, .linenums, .copyable-target");a.length&&(a.attr("id")||a.attr("id","code-"+t.zui.uuid()),e.prepend(S),S.attr("data-clipboard-target","#"+a.attr("id")),e.one("mouseleave",function(){S.detach()}))})}},Le=function(e){return"string"==typeof e&&(e=F[e]),e.variables?(e.variablesLess="",t.each(e.variables,function(t,a){e.variablesLess+="@"+t+": "+a+";\n"})):e.variablesLess||(e.variablesLess=""),e},je=function(a,s,i){"string"==typeof a&&(a=F[a]),"function"==typeof s&&(i=s,s=null),a.variablesLess||Le(a),a.imports||(a.imports=["src/less/basic/colorset.less","src/less/basic/variables.less","src/less/basic/mixins.less","src/less/theme.less","src/less/controls/icons.variables.less","src/less/doc.less"]);var r=t.isArray(a.imports)?a.imports.map(function(e){return'@import "'+e+'";'}).join("\n"):a.imports;r+=a.variablesLess+(a.lessCode||""),e.less.render(r,t.extend({compress:!0},s),function(e,t){i&&i(t,a)})},Ee=function(e){var t=document.getElementById("themeStyle");t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e},Se=function(e,a){var s=t("body"),i=function(i){Ee(i||""),a&&a(e),s.removeClass("theme-changing"),i?t.zui.store.set("doc_theme",e):t.zui.store.remove("doc_theme")};return e&&"default"!==e&&"default"!==e.name?("string"==typeof e&&(e=F[e]),s.hasClass("theme-changing")?!1:(s.addClass("theme-changing"),e.css?i(e.css):setTimeout(function(){je(e,null,function(t){t&&(e.css=t.css),i(t?t.css:"")})},500),!0)):void i()},qe=function(){t.each(F,function(e,t){t.name||(t.name=e)});var e=t.zui.store.get("doc_theme");e&&Se(e)},Ae=function(){N=e.document.title;var s=function(e){e.stopPropagation()};h=t(e),u=t("body"),T=t("#navbar"),p=t("#grid"),L=t("#header"),C=t("#page"),y=t("#pageHeader"),m=t("#pageAttrs"),x=t("#pageLoader"),w=t("#pageContent"),v=p.find(".chapter"),g=t("#searchInput"),E=p.find(".chapter-heading"),f=t("#sectionTemplate").attr("id",null),k=t("#pageBody"),t.each(q,function(e,a){e=e.toLowerCase(),a.$=t("#chapter-"+e),a.id=e,a.$sections=t("#sections-"+e)}),R=p.children(".container").outerWidth(),r=t.zui.store&&t.zui.store.enable,t.ajaxSetup({cache:!1}),Y(P,function(s){var i=!l;if(Z(s),!i){var r=a("q");r&&setTimeout(function(){de(r)},300);var o=e.location.hash;o?Ce(o):g.focus(),Te()}t(".doc-version").text(s.version)});var i,o;t(document).on("click",function(e){return o?void(o=!1):void(u.attr("data-query")||te())}).on("click",'a[href^="#"]',function(){Ce(t(this).attr("href"))}),C.on("click",function(e){o=!0}),p.on("click",".card-heading",function(e){var a=t(this).closest(".card");a.hasClass("choosed")?a.toggleClass("open"):te(a,!0),s(e)}).on("click",".chapter-heading > h4 > .name",function(){g.focus().val("@"+t(this).closest(".chapter").data("id")).change()}).on("click",".card",function(e){te(t(this),!0),s(e)}).on("click",".card-heading > h5 > .name, .card-heading > .icon",function(e){me(t(this).closest(".section")),s(e)}).on("click",".topics > li > a",function(e){var a=t(this);Ce(a.attr("href")),e.preventDefault(),s(e)}).on("mouseenter",".card-heading > h5 > .name, .card-heading > .icon",function(){t(this).closest(".card-heading").addClass("hover")}).on("mouseleave",".card-heading > h5 > .name, .card-heading > .icon",function(){t(this).closest(".card-heading").removeClass("hover")}).on("mouseenter","#section-control-icon .section-search > ul > li > a",function(){i=t("#section-control-icon").data("preview"),ce(t(this).closest("li"))}).on("mouseleave","#section-control-icon .section-search > ul > li > a",function(){i&&ce(t("#control-icon-"+i))}).on("click","#section-control-icon .section-search > ul > li > a",function(){i=t(this).closest("li").data("id")}),w.on("click","section > header > h3",function(){be(t(this).closest("section"))}).on("mouseenter","section > header > h3",function(){t(this).closest("section").addClass("hover")}).on("mouseleave","section > header > h3",function(){t(this).closest("section").removeClass("hover")}),C.on("click","#pageTogger",function(){be()}),y.on("click",".path-close-btn",function(){he()});var n,c=t("#navbar").outerHeight();h.on("scroll",function(e){if(!u.hasClass("layout-classic")){var t=u.data("isScrollAnimating");if(t)return void h.scrollTop(0);n=h.scrollTop(),n>c&&!u.hasClass("compact-mode")?ue(!0):u.hasClass("page-show")||L.toggleClass("with-shadow",n>20)}}).on("keydown",function(e){var t=e.which,a=!u.hasClass("page-show"),s=u.hasClass("input-query-focus");9===t?u.hasClass("input-query-focus")||(g.focus(),e.preventDefault()):13===t?a&&ee()&&me():27===t?he()||(s||g.focus(),z="",de()):37===t?(re(),e.preventDefault()):39===t?(oe(),e.preventDefault()):38===t?a?(ae(),e.preventDefault()):K(k,"up"):40===t&&a&&(se(),e.preventDefault())}),k.on("scroll",function(e){C.toggleClass("with-shadow",k.scrollTop()>20)}),W=t("#search"),g.focus().on("change keyup paste input propertychange",function(){var e=g.val();e!==z&&(z=e,W.toggleClass("with-query-text",e.length>0),clearTimeout(g.data(D)),g.data(D,setTimeout(function(){z!==g.data("queryString")&&de(z)},150)))}).on("focus",function(){u.addClass("input-query-focus"),g.val()&&!j.filter(".open").length&&te(j.filter(".show:first"))}).on("blur",function(){u.removeClass("input-query-focus")}).on("click",s),t("#searchHelpBtn").on("click",function(e){W.hasClass("with-query-text")?(z="",de(),g.focus(),W.removeClass("with-query-text")):(me(["resource","help"]),t(this).blur()),s(e)}),t("#navbar .navbar-brand").on("click",function(e){u.hasClass("page-show")?(he(),s(e),e.preventDefault()):u.hasClass("compact-mode-in")&&(h.scrollTop(0),ue(!1),s(e),e.preventDefault())}),ze(),qe(),t('[data-toggle="tooltip"]').tooltip({container:"body"})};Ae(),t.doc={query:de,themes:F,changeTheme:Se,compileTheme:je,compileThemeVariables:Le,openSection:me,closePage:he,loadData:Y,stopPageLoading:fe,displayPkgLibTable:We,pkg:c}}(window,jQuery);